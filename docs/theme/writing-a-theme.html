<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开发模板 | 苹果cmsV10</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script src="https://s9.cnzz.com/z_stat.php?id=1280223273&amp;web_id=1280223273"></script>
    <meta name="description" content="想要书写一个苹果cms模板，首先在template录创建一个 theme_tpl 目录作为我们自定义的模板目录，接着创建一个 html文件夹 用来存放所有的html文件">
    <meta name="keywords" content="苹果cms开发模板,使用标签,判断,函数,苹果cms">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.4140dd7b.css" as="style"><link rel="preload" href="/assets/js/app.266abcc8.js" as="script"><link rel="preload" href="/assets/js/5.b06b0d86.js" as="script"><link rel="preload" href="/assets/js/4.9ebf53b1.js" as="script"><link rel="preload" href="/assets/js/104.d189b941.js" as="script"><link rel="preload" href="/assets/js/8.a78a9654.js" as="script"><link rel="prefetch" href="/assets/js/10.f75a0466.js"><link rel="prefetch" href="/assets/js/100.6c617d34.js"><link rel="prefetch" href="/assets/js/101.b4efb35b.js"><link rel="prefetch" href="/assets/js/102.95e668be.js"><link rel="prefetch" href="/assets/js/103.15e6dd3c.js"><link rel="prefetch" href="/assets/js/105.99930a42.js"><link rel="prefetch" href="/assets/js/106.77605f1c.js"><link rel="prefetch" href="/assets/js/107.44d8235c.js"><link rel="prefetch" href="/assets/js/108.fa4521ad.js"><link rel="prefetch" href="/assets/js/109.f09ebaf3.js"><link rel="prefetch" href="/assets/js/11.6fca27a1.js"><link rel="prefetch" href="/assets/js/110.33e49f3c.js"><link rel="prefetch" href="/assets/js/111.0e4a3519.js"><link rel="prefetch" href="/assets/js/12.655dd338.js"><link rel="prefetch" href="/assets/js/13.905bf4a3.js"><link rel="prefetch" href="/assets/js/14.41035e8f.js"><link rel="prefetch" href="/assets/js/15.43ed14a4.js"><link rel="prefetch" href="/assets/js/16.554ab8a9.js"><link rel="prefetch" href="/assets/js/17.67a5e6d3.js"><link rel="prefetch" href="/assets/js/18.5f7f3103.js"><link rel="prefetch" href="/assets/js/19.d59b6e79.js"><link rel="prefetch" href="/assets/js/20.4e1f75b9.js"><link rel="prefetch" href="/assets/js/21.ccc012c0.js"><link rel="prefetch" href="/assets/js/22.3d184fc4.js"><link rel="prefetch" href="/assets/js/23.9e7a5763.js"><link rel="prefetch" href="/assets/js/24.5203028b.js"><link rel="prefetch" href="/assets/js/25.8c9226e7.js"><link rel="prefetch" href="/assets/js/26.1bbd6590.js"><link rel="prefetch" href="/assets/js/27.58a798ea.js"><link rel="prefetch" href="/assets/js/28.a82b46f8.js"><link rel="prefetch" href="/assets/js/29.0a0019f1.js"><link rel="prefetch" href="/assets/js/30.4431513d.js"><link rel="prefetch" href="/assets/js/31.1a620d96.js"><link rel="prefetch" href="/assets/js/32.4ed60888.js"><link rel="prefetch" href="/assets/js/33.d28c24eb.js"><link rel="prefetch" href="/assets/js/34.a297e062.js"><link rel="prefetch" href="/assets/js/35.b2d54de9.js"><link rel="prefetch" href="/assets/js/36.37b0f3ad.js"><link rel="prefetch" href="/assets/js/37.0f508a4b.js"><link rel="prefetch" href="/assets/js/38.6072dfab.js"><link rel="prefetch" href="/assets/js/39.1bce230b.js"><link rel="prefetch" href="/assets/js/40.6de9f380.js"><link rel="prefetch" href="/assets/js/41.7a2814b1.js"><link rel="prefetch" href="/assets/js/42.c742b4dc.js"><link rel="prefetch" href="/assets/js/43.17d23b00.js"><link rel="prefetch" href="/assets/js/44.bbc0041f.js"><link rel="prefetch" href="/assets/js/45.bd2b1165.js"><link rel="prefetch" href="/assets/js/46.0390e157.js"><link rel="prefetch" href="/assets/js/47.70537ea3.js"><link rel="prefetch" href="/assets/js/48.cd486f6a.js"><link rel="prefetch" href="/assets/js/49.8f281fc2.js"><link rel="prefetch" href="/assets/js/50.73e5557e.js"><link rel="prefetch" href="/assets/js/51.df03d224.js"><link rel="prefetch" href="/assets/js/52.f3d4ec78.js"><link rel="prefetch" href="/assets/js/53.75648dc4.js"><link rel="prefetch" href="/assets/js/54.e7edcd8d.js"><link rel="prefetch" href="/assets/js/55.6ac31dbb.js"><link rel="prefetch" href="/assets/js/56.fd85e84d.js"><link rel="prefetch" href="/assets/js/57.9a0b243e.js"><link rel="prefetch" href="/assets/js/58.0b878199.js"><link rel="prefetch" href="/assets/js/59.93124375.js"><link rel="prefetch" href="/assets/js/6.b8c76823.js"><link rel="prefetch" href="/assets/js/60.756119de.js"><link rel="prefetch" href="/assets/js/61.caaaaee7.js"><link rel="prefetch" href="/assets/js/62.1b1f568f.js"><link rel="prefetch" href="/assets/js/63.1a02a2be.js"><link rel="prefetch" href="/assets/js/64.a4451584.js"><link rel="prefetch" href="/assets/js/65.afa75d57.js"><link rel="prefetch" href="/assets/js/66.4f024f5e.js"><link rel="prefetch" href="/assets/js/67.5d3d8318.js"><link rel="prefetch" href="/assets/js/68.17701077.js"><link rel="prefetch" href="/assets/js/69.a0e71b2e.js"><link rel="prefetch" href="/assets/js/7.567e98f4.js"><link rel="prefetch" href="/assets/js/70.d77fd3dd.js"><link rel="prefetch" href="/assets/js/71.3367ef27.js"><link rel="prefetch" href="/assets/js/72.be67063b.js"><link rel="prefetch" href="/assets/js/73.9fbed8dd.js"><link rel="prefetch" href="/assets/js/74.410e6c50.js"><link rel="prefetch" href="/assets/js/75.95ff2207.js"><link rel="prefetch" href="/assets/js/76.a17db1a4.js"><link rel="prefetch" href="/assets/js/77.eeeb7aef.js"><link rel="prefetch" href="/assets/js/78.e95e0405.js"><link rel="prefetch" href="/assets/js/79.73d9ff68.js"><link rel="prefetch" href="/assets/js/80.0714a7dd.js"><link rel="prefetch" href="/assets/js/81.5cf2c73d.js"><link rel="prefetch" href="/assets/js/82.12ef0349.js"><link rel="prefetch" href="/assets/js/83.32421d6d.js"><link rel="prefetch" href="/assets/js/84.5c71e7fc.js"><link rel="prefetch" href="/assets/js/85.da526268.js"><link rel="prefetch" href="/assets/js/86.58667a13.js"><link rel="prefetch" href="/assets/js/87.c70b206e.js"><link rel="prefetch" href="/assets/js/88.6504f63c.js"><link rel="prefetch" href="/assets/js/89.b6bce2d1.js"><link rel="prefetch" href="/assets/js/9.e75c031f.js"><link rel="prefetch" href="/assets/js/90.ccd4827b.js"><link rel="prefetch" href="/assets/js/91.5b8fa588.js"><link rel="prefetch" href="/assets/js/92.15097574.js"><link rel="prefetch" href="/assets/js/93.f1c20a05.js"><link rel="prefetch" href="/assets/js/94.fece6a8a.js"><link rel="prefetch" href="/assets/js/95.f6a3b518.js"><link rel="prefetch" href="/assets/js/96.b9fb0619.js"><link rel="prefetch" href="/assets/js/97.6ce6d7c0.js"><link rel="prefetch" href="/assets/js/98.efc764de.js"><link rel="prefetch" href="/assets/js/99.5642e34b.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.2b48bf23.js"><link rel="prefetch" href="/assets/js/vendors~notification.14a64265.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4140dd7b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">苹果cmsV10</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  配置
</a></div><div class="nav-item"><a href="/plugin/" class="nav-link">
  插件
</a></div><div class="nav-item"><a href="/theme/" class="nav-link router-link-active">
  模板
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          API
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/api/collect.html" class="nav-link">
  采集接口
</a></li><li class="dropdown-subitem"><a href="/api/web-design.html" class="nav-link">
  前端接口
</a></li></ul></li><li class="dropdown-item"><h4>
          站长手册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webmaster/template.html" class="nav-link">
  买模板
</a></li><li class="dropdown-subitem"><a href="/webmaster/server.html" class="nav-link">
  服务器
</a></li><li class="dropdown-subitem"><a href="/webmaster/ads.html" class="nav-link">
  广告联盟
</a></li><li class="dropdown-subitem"><a href="/faq/" class="nav-link">
  常见问题
</a></li><li class="dropdown-subitem"><a href="/webmaster/glossary.html" class="nav-link">
  行业术语
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webmaster/migration-guide.html" class="nav-link">
  其他cms转苹果cms
</a></li><li class="dropdown-subitem"><a href="/webmaster/transfer.html" class="nav-link">
  网站搬家
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v10.x" class="dropdown-title"><span class="title">v10.x</span> <span class="arrow down"></span></button> <button type="button" aria-label="v10.x" class="mobile-dropdown-title"><span class="title">v10.x</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  v10.x
</a></li><li class="dropdown-item"><!----> <a href="https://www.maccms.la/doc/v8/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v8.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/theme/writing-a-theme.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/tc/theme/writing-a-theme.html" class="nav-link">
  繁體中文
</a></li></ul></div></div> <a href="https://github.com/magicblack/maccms10" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/config/" class="nav-link">
  配置
</a></div><div class="nav-item"><a href="/plugin/" class="nav-link">
  插件
</a></div><div class="nav-item"><a href="/theme/" class="nav-link router-link-active">
  模板
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="了解更多" class="dropdown-title"><span class="title">了解更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="了解更多" class="mobile-dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          API
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/api/collect.html" class="nav-link">
  采集接口
</a></li><li class="dropdown-subitem"><a href="/api/web-design.html" class="nav-link">
  前端接口
</a></li></ul></li><li class="dropdown-item"><h4>
          站长手册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webmaster/template.html" class="nav-link">
  买模板
</a></li><li class="dropdown-subitem"><a href="/webmaster/server.html" class="nav-link">
  服务器
</a></li><li class="dropdown-subitem"><a href="/webmaster/ads.html" class="nav-link">
  广告联盟
</a></li><li class="dropdown-subitem"><a href="/faq/" class="nav-link">
  常见问题
</a></li><li class="dropdown-subitem"><a href="/webmaster/glossary.html" class="nav-link">
  行业术语
</a></li></ul></li><li class="dropdown-item"><h4>
          其他
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/webmaster/migration-guide.html" class="nav-link">
  其他cms转苹果cms
</a></li><li class="dropdown-subitem"><a href="/webmaster/transfer.html" class="nav-link">
  网站搬家
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v10.x" class="dropdown-title"><span class="title">v10.x</span> <span class="arrow down"></span></button> <button type="button" aria-label="v10.x" class="mobile-dropdown-title"><span class="title">v10.x</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  v10.x
</a></li><li class="dropdown-item"><!----> <a href="https://www.maccms.la/doc/v8/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v8.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="选择语言" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/theme/writing-a-theme.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/tc/theme/writing-a-theme.html" class="nav-link">
  繁體中文
</a></li></ul></div></div> <a href="https://github.com/magicblack/maccms10" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>模板</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/theme/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/theme/using-a-theme.html" class="sidebar-link">使用模板</a></li><li><a href="/theme/writing-a-theme.html" aria-current="page" class="active sidebar-link">开发模板</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#使用标签" class="sidebar-link">使用标签</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#使用函数" class="sidebar-link">使用函数</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#常用处理函数" class="sidebar-link">常用处理函数</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#常用js处理函数" class="sidebar-link">常用JS处理函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#视频、文章、专题点击量显示-通用" class="sidebar-link">视频、文章、专题点击量显示  通用</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#在视频、文章、专题详情页面写入浏览历史记录" class="sidebar-link">在视频、文章、专题详情页面写入浏览历史记录</a></li></ul></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#使用默认值" class="sidebar-link">使用默认值</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#使用运算符" class="sidebar-link">使用运算符</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#三元运算" class="sidebar-link">三元运算</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#模板继承" class="sidebar-link">模板继承</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#比较标签" class="sidebar-link">比较标签</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#条件判断" class="sidebar-link">条件判断</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#switch标签" class="sidebar-link">SWITCH标签</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#if标签" class="sidebar-link">IF标签</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#范围判断" class="sidebar-link">范围判断</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#between-和-notbetween" class="sidebar-link">BETWEEN 和 NOTBETWEEN</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#range" class="sidebar-link">RANGE</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#present-notpresent标签" class="sidebar-link">PRESENT NOTPRESENT标签</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#empty-notempty-标签" class="sidebar-link">EMPTY NOTEMPTY 标签</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#defined-标签" class="sidebar-link">DEFINED 标签</a></li></ul></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#标签嵌套" class="sidebar-link">标签嵌套</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#使用php" class="sidebar-link">使用PHP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#使用php标签" class="sidebar-link">使用php标签</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#使用原生php代码" class="sidebar-link">使用原生php代码</a></li><li class="sidebar-sub-header"><a href="/theme/writing-a-theme.html#自定义标签" class="sidebar-link">自定义标签</a></li></ul></li></ul></li><li><a href="/theme/structure.html" class="sidebar-link">模板结构</a></li><li><a href="/theme/theme-vod.html" class="sidebar-link">视频</a></li><li><a href="/theme/theme-art.html" class="sidebar-link">文章</a></li><li><a href="/theme/theme-topic.html" class="sidebar-link">专题</a></li><li><a href="/theme/theme-actor.html" class="sidebar-link">演员</a></li><li><a href="/theme/theme-website.html" class="sidebar-link">网址</a></li><li><a href="/theme/theme-user.html" class="sidebar-link">用户</a></li><li><a href="/theme/theme-type.html" class="sidebar-link">分类</a></li><li><a href="/theme/theme-plot.html" class="sidebar-link">剧情</a></li><li><a href="/theme/theme-role.html" class="sidebar-link">角色</a></li><li><a href="/theme/theme-other.html" class="sidebar-link">通用</a></li><li><a href="/theme/tags-global.html" class="sidebar-link">全局标签</a></li><li><a href="/theme/senior.html" class="sidebar-link">高级用法</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="开发模板"><a href="#开发模板" class="header-anchor">#</a> 开发模板</h1> <p>想要书写一个主题，首先在<code>template</code>录创建一个 <code>theme_tpl</code> 目录作为我们自定义的模板目录，接着创建一个 <code>html文件夹</code> 用来存放所有的html文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>└─ template
   └─ `theme_tpl`
       ├─ css
       ├─ js
       └─ html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>详细可参考 <a href="/theme/structure.html">模板结构</a> 来构建你的模板结构，这里知识点主要是开发技巧，不做详细的构建步骤介绍,开发任何网站模板是要具备一定 <code>html</code> <code>css</code> 和 <code>javascript</code> 等前端基础哦</p></div> <p><strong>必备js</strong></p> <p>自带的 <code>home.js</code>已经做好了很多必备的功能，开发者直接引入既可以使用里面 <code>MAC</code> 对象封装的函数，例如：历史记录、顶踩收藏、访问量统计，评论等等功能，俗称苹果cms模板必备三段。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.path}static/js/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"><span class="token keyword">var</span> maccms<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;__ROOT__&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;mid&quot;</span><span class="token operator">:</span><span class="token string">&quot;{$maccms['mid']}&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;{$maccms['site_url']}&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;wapurl&quot;</span><span class="token operator">:</span><span class="token string">&quot;{$maccms['site_wapurl']}&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;mob_status&quot;</span><span class="token operator">:</span><span class="token string">&quot;{$maccms['mob_status']}&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.path}static/js/home.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="使用标签"><a href="#使用标签" class="header-anchor">#</a> 使用标签</h2> <p>苹果CMSv10标签完全支持<code>tp5</code>的语法，在HTML中使用<code>{}</code>包裹起来的<code>php</code>变量，如 <code>{$maccms['site_name']}</code>数组的形式支持用<code>.</code>来代替如：<code>{$maccms.site_name}</code>。列表标签有<code>起始标签</code>和<code>结束标签</code>组成。如 <code>{maccms:vod type=&quot;all&quot; num=&quot;10&quot;}{/maccms:vod}</code>,内部变量都是数据库字段组成，以 <code>$vo.</code>开头如：<code>{$vo.vod_name}</code>、<code>{$vo.vod_id}</code> 等等。</p> <h2 id="使用函数"><a href="#使用函数" class="header-anchor">#</a> 使用函数</h2> <p>我们往往需要对模板输出变量使用函数，可以使用：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{$data.name|md5} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>编译后的结果是：</li></ul> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>如果函数有多个参数需要调用，则使用：</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{$create_time|date=&quot;y-m-d&quot;,###}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示date函数传入两个参数，每个参数用逗号分割，这里第一个参数是y-m-d，第二个参数是前面要输出的create_time变量，因为该变量是第二个参数，因此需要用###标识变量位置，编译后的结果是：</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;y-m-d&quot;</span><span class="token punctuation">,</span><span class="token variable">$create_time</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果前面输出的变量在后面定义的函数的第一个参数，则可以直接使用：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{$data.name|substr=0,3}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示输出</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token prolog">&lt;?php echo (substr($data['name'],0,3)); ?&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>虽然也可以使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{$data.name|substr=###,0,3}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但完全没用这个必要。
还可以支持多个函数过滤，多个函数之间用<code>|</code>分割即可，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{$name|md5|strtoupper|substr=0,3}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>编译后的结果是：</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token punctuation">(</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>函数会按照从左到右的顺序依次调用。
如果你觉得这样写起来比较麻烦，也可以直接这样写：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{:substr(strtoupper(md5($name)),0,3)}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>变量输出使用的函数可以支持内置的PHP函数或者用户自定义函数，甚至是静态方法。</p></div> <h2 id="常用处理函数"><a href="#常用处理函数" class="header-anchor">#</a> 常用处理函数</h2> <ul><li><p>允许使用多个函数，都使用|分隔开</p></li> <li><p>所有图片地址，不管是远程的本地的都建议使用 <code>mac_url_img</code> 来处理。</p></li> <li><p><code>{:mac_data_count(0,'all','vod')}</code> 获取视频总数量</p></li> <li><p><code>{:mac_data_count(0,'today','vod')}</code>获取今日更新视频总数量</p></li> <li><p><code>{:mac_data_count(0,'all','art')}</code>获取文章总数量</p></li> <li><p><code>{:mac_data_count(0,'today','art')}</code> 获取今日更新文章总数量</p></li> <li><p><code>{:mac_data_count(1,'all')}</code>获取某个分类下的数据总量，支持视频和文章,传入分类ID</p></li> <li><p><code>{:mac_data_count(1,'today')}</code> 获取某个分类下的今日更新数据总量，支持视频和文章,传入分类ID</p></li> <li><p>另外还支持<code>topic</code>,<code>website</code>,<code>actor</code>,<code>role</code>模块的获取数据数量</p></li> <li><p><code>{:mac_url('map/index')}</code> 获取站内链接,参数代表 模块/页面</p></li> <li><p><code>{$obj.vod_content|mac_url_content_img}</code> 如果使用了第三方附件存储，附件和图片默认url是mac:开头的，此方法将替换为- <code>http</code></p></li> <li><p><code>{$vo.vod_pic|mac_url_img}</code>  自动转换图片地址</p></li> <li><p><code>{$vo.vod_content|mac_substring=100}</code>返回截取字符串100个字</p></li> <li><p><code>{$vo.vod_content|mac_filter_html}</code>返回没有html代码的内容</p></li> <li><p><code>{$vo.actor|mac_url_create='actor','vod','search','&amp;nbsp;'}</code>
把,号相连的一串字符生成N个搜索链接,后2个参数可以不填写默认是生成vod模块搜索链接。 例子是创建演员搜索链接。支持演员、导演、tag、扩展分类等字段。最后一个参数是生成链接的分隔符。</p></li> <li><p><code>{$vo.vod_time|mac_day}</code>自动返回日期</p></li> <li><p><code>{$vo.vod_time|mac_friend_date}</code>友好时间提醒 几秒前，几分前，几小时前，几天前。。。</p></li> <li><p><code>{$vo.vod_year|mac_default='未知'}</code>如果字符串为空，则返回默认字符串</p></li> <li><p><code>{$user.user_login_ip|mac_long2ip}</code>返回格式化ip地址</p></li> <li><p><code>{$user.user_id|mac_get_user_portrait}</code>获取用户头像地址</p></li></ul> <h2 id="常用js处理函数"><a href="#常用js处理函数" class="header-anchor">#</a> 常用JS处理函数</h2> <p>一般用元素的class自动绑定处理事件</p> <ul><li>会员-收藏视频内容</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_ulog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我要收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>会员-收藏文章内容页</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_ulog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.art_id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我要收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>会员-收藏专题内容页</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_ulog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.topic_id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我要收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>以下内容一般放到body结尾之前，不用于显示，只用户记录信息。</p> <ul><li>会员-文章浏览记录</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_ulog_set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>设置文章内容页浏览记录<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.art_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-sid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.sid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-nid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.nid}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>会员-专题浏览记录</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_ulog_set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>设置专题内容页浏览记录<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.topic_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-sid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.sid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-nid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.nid}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>会员-视频浏览记录</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_ulog_set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>设置内容页浏览记录<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-sid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.sid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-nid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.nid}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>会员-视频播放记录</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_ulog_set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>设置视频播放记录<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-sid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.sid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-nid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.nid}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>会员-视频下载记录</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_ulog_set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>设置视频播放记录<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-sid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.sid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-nid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$param.nid}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>视频、文章、专题 顶和踩  通用</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>digg_link<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}{$obj.art_id}{$obj.topic_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>up<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  顶<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>digg_num<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{$obj.vod_up}{$obj.art_up}{$obj.topic_up}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>digg_link<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$vod_id}{$art_id}{$topic_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>down<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  踩<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>digg_num<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{$obj.vod_down}{$obj.art_down}{$obj.topic_down}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="视频、文章、专题点击量显示-通用"><a href="#视频、文章、专题点击量显示-通用" class="header-anchor">#</a> 视频、文章、专题点击量显示  通用</h3> <p>总点击量：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_hits hits<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}{$obj.art_id}{$obj.topic_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hits<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>日点击量：</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_hits hits_day<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}{$obj.art_id}{$obj.topic_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hits_day<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>周点击量：</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_hits hits_week<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}{$obj.art_id}{$obj.topic_id}<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hits_week<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>月点击量：</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_hits hits_month<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-mid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$maccms.mid}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_id}{$obj.art_id}{$obj.topic_id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hits_month<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>前台浏览历史记录调用</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_history<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>历史记录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="在视频、文章、专题详情页面写入浏览历史记录"><a href="#在视频、文章、专题详情页面写入浏览历史记录" class="header-anchor">#</a> 在视频、文章、专题详情页面写入浏览历史记录</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_history_set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>设置视频历史记录<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{$obj.type.type_name}]{$obj.vod_name}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-pic</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.vod_pic|mac_url_img}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_history_set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>设置文章历史记录<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{$obj.type.type_name}]{$obj.art_name}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-pic</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.art_pic|mac_url_img}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span>none</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_history_set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>设置专题历史记录<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.topic_name}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-pic</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{$obj.topic_pic|mac_url_img}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>访问页面触发定时任务，建议放到首页底部；  由于入口文件名可变，默认是api.php，如需修改请自定义 data-file=&quot;xxx.php&quot;</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_timming<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>网址导航来路记录统计；建议放到首页底部。来路域名必须和网址导航里的跳转url里的一致。</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_referer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>自动获取短网址连接</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shorten<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mac_shorten<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>短网址自定义用法，js来获取</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token constant">MAC</span><span class="token punctuation">.</span>Shorten<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;http://www.baidu.com/&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url_short<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>获取用户记录日志，比如1浏览、2收藏、3想看、4点播、5下载</li> <li><code>MAC.Ulog.Get</code>有<code>4</code>个参数<code>type</code>类型<code>0</code>代表全部,<code>page</code>页码,<code>limit</code>每页条数,<code>call</code>回调函数</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token constant">MAC</span><span class="token punctuation">.</span>Ulog<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">999</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            $<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span>r<span class="token punctuation">[</span><span class="token string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span>row</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'--'</span> <span class="token operator">+</span> row<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'--'</span> <span class="token operator">+</span> row<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'pic'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'--'</span> <span class="token operator">+</span> row<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'--'</span> <span class="token operator">+</span> row<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'type_name'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'--'</span> <span class="token operator">+</span> row<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'--'</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'获取失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="使用默认值"><a href="#使用默认值" class="header-anchor">#</a> 使用默认值</h2> <p>我们可以给变量输出提供默认值，例如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{$obj.user_nickname|default=&quot;这个人没有昵称&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>对系统变量依然可以支持默认值输出，例如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{$obj.vod_actor|default=&quot;演员为空&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>默认值和函数可以同时使用，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{$Think.get.name|getName|default=&quot;名称为空&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="使用运算符"><a href="#使用运算符" class="header-anchor">#</a> 使用运算符</h2> <p>我们可以对模板输出使用运算符，包括对“+”“-” “*” “/”和“%”的支持。
例如：</p> <table><thead><tr><th>运算符</th> <th>使用示例</th></tr></thead> <tbody><tr><td>+</td> <td>{$a+$b}</td></tr> <tr><td>-</td> <td>{$a-$b}</td></tr> <tr><td>*</td> <td>{$a*$b}</td></tr> <tr><td>/</td> <td>{$a/$b}</td></tr> <tr><td>%</td> <td>{$a%$b}</td></tr> <tr><td>++</td> <td>{$a++} 或 {++$a}</td></tr> <tr><td>--</td> <td>{$a--} 或 {--$a}</td></tr> <tr><td>综合判断</td> <td>{$a+$b*10+$c}</td></tr></tbody></table> <p>在使用运算符的时候，不再支持常规函数用法，例如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{$user.score+10} //正确的
{$user['score']+10} //正确的
{$user['score']*$user['level']} //正确的
{$user['score']|myFun*10} //错误的
{$user['score']+myFun($user['level'])} //正确的
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="三元运算"><a href="#三元运算" class="header-anchor">#</a> 三元运算</h2> <p>模板可以支持三元运算符，例如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{$status? '正常' : '错误'}
{$info['status']? $info['msg'] : $info['error']}
{$info.status? $info.msg : $info.error }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>5.0版本还支持如下的写法：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{$varname.aa ?? 'xxx'}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示如果有设置$varname则输出$varname,否则输出'xxx'。 解析后的代码为：</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$varname</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'aa'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token variable">$varname</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'aa'</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">'默认值'</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code>{$varname?='xxx'} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示$varname为真时才输出xxx。 解析后的代码为：</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">echo</span> <span class="token string single-quoted-string">'xxx'</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code>{$varname ?: 'no'}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>表示如果$varname为真则输出$varname，否则输出no。解析后的代码为：</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$varname</span> <span class="token operator">?</span> <span class="token variable">$varname</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">'no'</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code>{$a==$b ? 'yes' : 'no'}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>前面的表达式为真输出yes,否则输出no， 条件可以是==、===、!=、!==、&gt;=、&lt;=</p> <h2 id="模板继承"><a href="#模板继承" class="header-anchor">#</a> 模板继承</h2> <p>模板继承是一项更加灵活的模板布局方式，模板继承不同于模板布局，甚至来说，应该在模板布局的上层。模板继承其实并不难理解，就好比类的继承一样，模板也可以定义一个基础模板（或者是布局），并且其中定义相关的区块<code>block</code>，然后继承<code>extend</code>该基础模板的子模板中就可以对基础模板中定义的区块进行重载。</p> <p>因此，模板继承的优势其实是设计基础模板中的区块`block）和子模板中替换这些区块。</p> <p>每个区块由<code>{block} {/block}</code>标签组成。 下面就是基础模板中的一个典型的区块设计（用于设计网站标题）：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{block name=&quot;title&quot;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>网站标题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>{/block}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>block标签必须指定name属性来标识当前区块的名称，这个标识在当前模板中应该是唯一的，block标签中可以包含任何模板内容，包括其他标签和变量，例如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{block name=&quot;title&quot;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>{$web_title}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>{/block}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>你甚至还可以在区块中加载外部文件：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{block name=&quot;include&quot;}{include file=&quot;Public:header&quot; /}{/block}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>一个模板中可以定义任意多个名称标识不重复的区块，例如下面定义了一个<code>base.html</code>基础模板：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html; charset=utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>{block name=&quot;title&quot;}标题{/block}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
      {block name=&quot;menu&quot;}菜单{/block}
      {block name=&quot;left&quot;}左边分栏{/block}
      {block name=&quot;main&quot;}主内容{/block}
      {block name=&quot;right&quot;}右边分栏{/block}
      {block name=&quot;footer&quot;}底部{/block}
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>然后我们在子模板（其实是当前操作的入口模板）中使用继承：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{extend name=&quot;base&quot; /}
{block name=&quot;title&quot;}{$title}{/block}
{block name=&quot;menu&quot;}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/info/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>资讯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/bbs/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>论坛<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
{/block}
{block name=&quot;left&quot;}{/block}
{block name=&quot;main&quot;}
{volist name=&quot;list&quot; id=&quot;vo&quot;}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/new/{$vo.id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{$vo.title}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
 {$vo.content}
{/volist}
{/block}
{block name=&quot;right&quot;}
 最新资讯：
{volist name=&quot;news&quot; id=&quot;new&quot;}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/new/{$new.id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{$new.title}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
{/volist}
{/block}
{block name=&quot;footer&quot;}
{__block__}
 @ThinkPHP 版权所有
{/block}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>上例中，我们可以看到在子模板中使用了extend标签来继承了base模板。
在子模板中，可以对基础模板中的区块进行重载定义，如果没有重新定义的话，则表示沿用基础模板中的区块定义，如果定义了一个空的区块，则表示删除基础模板中的该区块内容。 上面的例子，我们就把left区块的内容删除了，其他的区块都进行了重载。而</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{block name=&quot;footer&quot;}
{__block__}@大图模板datll.com 版权所有
{/block}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这一区块中有<code>{_block_}</code>这个标签，当区块中有这个标记时，就不只是直接重载这个区块，它表示引用所继承模板对应区块的内容到这个位置，最终这个区块是合并后的内容。所以这里<code>footer</code>区块最后的内容是： 底部@大图模板 版权所有
<code>extend</code>标签的用法和<code>include</code>标签一样，你也可以加载其他模板：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{extend name=&quot;Public:base&quot; /}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者使用绝对文件路径加载</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{extend name=&quot;./Template/Public/base.html&quot; /}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在当前子模板中，只能定义区块而不能定义其他的模板内容，否则将会直接忽略，并且只能定义基础模板中已经定义的区块。
例如，如果采用下面的定义：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{block name=&quot;title&quot;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>{$title}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>{/block}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/art/index<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>资讯<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/actor/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>明星<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>导航部分将是无效的，不会显示在模板中。
模板可以多级继承，比如B继承了A，而C又继承了B，最终C中的区块会覆盖B和A中的同名区块，但C和B中的区块必须是A中已定义过的。
子模板中的区块定义顺序是随意的，模板继承的用法关键在于基础模板如何布局和设计规划了，如果结合原来的布局功能，则会更加灵活。</p> <h2 id="比较标签"><a href="#比较标签" class="header-anchor">#</a> 比较标签</h2> <p>比较标签用于简单的变量比较，复杂的判断条件可以用if标签替换，比较标签是一组标签的集合，基本上用法都一致，如下：</p> <table><thead><tr><th>标签</th> <th>含义</th></tr></thead> <tbody><tr><td>eq或者 equal</td> <td>等于</td></tr> <tr><td>neq 或者notequal</td> <td>不等于</td></tr> <tr><td>gt</td> <td>大于</td></tr> <tr><td>egt</td> <td>大于等于</td></tr> <tr><td>lt</td> <td>小于</td></tr> <tr><td>elt</td> <td>小于等于</td></tr> <tr><td>heq</td> <td>恒等于</td></tr> <tr><td>nheq</td> <td>不恒等于</td></tr></tbody></table> <p>他们的用法基本是一致的，区别在于判断的条件不同，并且所有的比较标签都可以和else标签一起使用。
例如，要求name变量的值等于value就输出，可以使用：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{eq name=&quot;name&quot; value=&quot;value&quot;}value{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{equal name=&quot;name&quot; value=&quot;value&quot;}value{/equal}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也可以支持和else标签混合使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{eq name=&quot;name&quot; value=&quot;value&quot;}
相等
{else/}
不相等
{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当 name变量的值大于5就输出</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{gt name=&quot;vod_name&quot; value=&quot;5&quot;}value{/gt}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当name变量的值不小于5就输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{egt name=&quot;name&quot; value=&quot;5&quot;}value{/egt}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>比较标签中的变量可以支持对象的属性或者数组，甚至可以是系统变量，例如： 当vo对象的属性（或者数组，或者自动判断）等于5就输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{eq name=&quot;vo.vod_name&quot; value=&quot;5&quot;}
{$vo.vod_name}
{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当<code>vo</code>对象的属性等于5就输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{eq name=&quot;vo:vod_name&quot; value=&quot;5&quot;}
{$vo.vod_name}
{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当<code>$vo['vod_name']</code>等于5就输出</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{eq name=&quot;vo['vod_name']&quot; value=&quot;5&quot;}
{$vo.name}
{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>而且还可以支持对变量使用函数 当<code>vo</code>对象的属性值的字符串长度等于<code>5</code>就输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{eq name=&quot;vo:name|strlen&quot; value=&quot;5&quot;}{$vo.name}{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>变量名可以支持Thinkphp5.0系统变量的方式，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{eq name=&quot;Think.get.name&quot; value=&quot;value&quot;}相等{else/}不相等{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通常比较标签的值是一个字符串或者数字，如果需要使用变量，只需要在前面添加<code>$</code>标志： 当<code>vo</code>对象的属性等于<code>$a</code>就输出</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{eq name=&quot;vo:vod_name&quot; value=&quot;$a&quot;}{$vo.vod_name}{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>所有的比较标签可以统一使用<code>compare</code>标签（其实所有的比较标签都是<code>compare</code>标签的别名），例如： 当<code>name</code>变量的值等于5就输出</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{compare name=&quot;name&quot; value=&quot;5&quot; type=&quot;eq&quot;}value{/compare}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>等效于</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{eq name=&quot;name&quot; value=&quot;5&quot; }value{/eq}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中type属性的值就是上面列出的比较标签名称</p> <h2 id="条件判断"><a href="#条件判断" class="header-anchor">#</a> 条件判断</h2> <h3 id="switch标签"><a href="#switch标签" class="header-anchor">#</a> SWITCH标签</h3> <p>用法：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{switch name=&quot;变量&quot; }
    {case value=&quot;值1&quot; break=&quot;0或1&quot;}输出内容1{/case}
    {case value=&quot;值2&quot;}输出内容2{/case}
    {default /}默认情况
{/switch}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>使用方法如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{switch name=&quot;User.level&quot;}
    {case value=&quot;1&quot;}value1{/case}
    {case value=&quot;2&quot;}value2{/case}
    {default /}default
{/switch}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其中name属性可以使用函数以及系统变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{switch name=&quot;Think.get.userId|abs&quot;}
    {case value=&quot;1&quot;}admin{/case}
    {default /}default
{/switch}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>对于case的value属性可以支持多个条件的判断，使用”|”进行分割，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{switch name=&quot;Think.get.type&quot;}
    {case value=&quot;gif|png|jpg&quot;}图像格式{/case}
    {default /}其他格式
{/switch}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>表示如果<code>$_GET[&quot;type&quot;]</code> 是<code>gif</code>、<code>png</code>或者<code>jpg</code>的话，就判断为图像格式。</p> <p><code>Case</code>标签还有一个<code>break</code>属性，表示是否需要<code>break</code>，默认是会自动添加<code>break</code>，如果不要<code>break</code>，可以使用：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{switch name=&quot;Think.get.userId|abs&quot;}
    {case value=&quot;1&quot; break=&quot;0&quot;}admin{/case}
    {case value=&quot;2&quot;}admin{/case}
    {default /}default
{/switch}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>也可以对case的value属性使用变量，例如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{switch name=&quot;User.userId&quot;}
    {case value=&quot;$adminId&quot;}admin{/case}
    {case value=&quot;$memberId&quot;}member{/case}
    {default /}default
{/switch}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>使用变量方式的情况下，不再支持多个条件的同时判断。</p></div> <p>简洁的用法</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{switch $User.userId}
    {case $adminId}admin{/case}
    {case $memberId}member{/case}
{/switch}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="if标签"><a href="#if标签" class="header-anchor">#</a> IF标签</h3> <p>用法示例：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{if condition=&quot;($name == 1) OR ($name &gt; 100) &quot;} value1
{elseif condition=&quot;$name eq 2&quot;/}value2
{else /} value3
{/if}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>除此之外，我们可以在condition属性里面使用php代码，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{if condition=&quot;strtoupper($user['name']) neq 'THINKPHP'&quot;}ThinkPHP
{else /} other Framework
{/if}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>condition属性可以支持点语法和对象语法，例如： 自动判断user变量是数组还是对象</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{if condition=&quot;$user.name neq 'ThinkPHP'&quot;}ThinkPHP
{else /} other Framework
{/if}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>或者知道user变量是对象</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{if condition=&quot;$user:name neq 'ThinkPHP'&quot;}ThinkPHP
{else /} other Framework
{/if}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>由于<code>if</code>标签的<code>condition</code>属性里面基本上使用的是<code>php</code>语法，尽可能使用判断标签和<code>Switch</code>标签会更加简洁，原则上来说，能够用<code>switch</code>和比较标签解决的尽量不用<code>if</code>标签完成。因为<code>switch</code>和比较标签可以使用变量调节器和系统变量。如果某些特殊的要求下面，<code>IF</code>标签仍然无法满足要求的话，可以使用原生<code>php</code>代码或者<code>PHP</code>标签来直接书写代码。
简洁的用法</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{if condition=&quot;表达式&quot;}
{if (表达式)}
{if 表达式}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这三种写法结果是一样的</p> <h3 id="范围判断"><a href="#范围判断" class="header-anchor">#</a> 范围判断</h3> <p>范围判断标签包括<code>in</code> <code>notin</code> <code>between</code> <code>notbetween</code>四个标签，都用于判断变量是否中某个范围。</p> <h4 id="in和notin"><a href="#in和notin" class="header-anchor">#</a> IN和NOTIN</h4> <p>用法： 假设我们中控制器中给id赋值为1：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$id =    1;
$this-&gt;assign('id',$id);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>我们可以使用in标签来判断模板变量是否在某个范围内，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{in name=&quot;id&quot; value=&quot;1,2,3&quot;}
id在范围内
{/in}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最后会输出：<code>id</code>在范围内。</p> <p>如果判断不在某个范围内，可以使用<code>notin</code>标签：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{notin name=&quot;id&quot; value=&quot;1,2,3&quot;}
id不在范围内
{/notin}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最后会输出：<code>id</code>不在范围内。
可以把上面两个标签合并成为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{in name=&quot;id&quot; value=&quot;1,2,3&quot;}
id在范围内
{else/}
id不在范围内
{/in}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>name</code>属性还可以支持直接判断系统变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{in name=&quot;Think.get.id&quot; value=&quot;1,2,3&quot;}
$_GET['id'] 在范围内
{/in}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>更多的系统变量用法可以参考系统变量部分。</p></div> <p>value属性也可以使用变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{in name=&quot;id&quot; value=&quot;$range&quot;}
id在范围内
{/in}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>$range</code>变量可以是数组，也可以是以逗号分隔的字符串。
<code>value</code>属性还可以使用系统变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{in name=&quot;id&quot; value=&quot;$Think.post.ids&quot;}
id在范围内
{/in}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="between-和-notbetween"><a href="#between-和-notbetween" class="header-anchor">#</a> BETWEEN 和 NOTBETWEEN</h3> <p>可以使用between标签来判断变量是否在某个区间范围内，可以使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{between name=&quot;id&quot; value=&quot;1,10&quot;}
输出内容1
{/between}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>同样，也可以使用notbetween标签来判断变量不在某个范围内：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{notbetween name=&quot;id&quot; value=&quot;1,10&quot;}
输出内容2
{/notbetween}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>也可以使用<code>else</code>标签把两个用法合并，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{between name=&quot;id&quot; value=&quot;1,10&quot;}
输出内容1
{else/}
输出内容2
{/between}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当使用between标签的时候，value只需要一个区间范围，也就是只支持两个值，后面的值无效，例如</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{between name=&quot;id&quot; value=&quot;1,3,10&quot;}
输出内容1
{/between}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>实际判断的范围区间是<code>1~3</code>，而不是<code>1~10</code>，也可以支持字符串判断，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{between name=&quot;id&quot; value=&quot;A,Z&quot;}
输出内容1
{/between}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>name</code>属性可以直接使用系统变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{between name=&quot;Think.post.id&quot; value=&quot;1,5&quot;}
输出内容1
{/between}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>value属性也可以使用变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{between name=&quot;id&quot; value=&quot;$range&quot;}
输出内容1
{/between}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>变量的值可以是字符串或者数组，还可以支持系统变量。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{between name=&quot;id&quot; value=&quot;$Think.get.range&quot;}
输出内容1
{/between}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="range"><a href="#range" class="header-anchor">#</a> RANGE</h3> <p>也可以直接使用range标签，替换前面的判断用法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{range name=&quot;id&quot; value=&quot;1,2,3&quot; type=&quot;in&quot;}
输出内容1
{/range}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>其中<code>type</code>属性的值可以用<code>in/notin/between/notbetween</code>，其它属性的用法和<code>IN</code>或者<code>BETWEEN</code>一致。</p> <h3 id="present-notpresent标签"><a href="#present-notpresent标签" class="header-anchor">#</a> PRESENT NOTPRESENT标签</h3> <p>present标签用于判断某个变量是否已经定义，用法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{present name=&quot;name&quot;}
name已经赋值
{/present}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果判断没有赋值，可以使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{notpresent name=&quot;name&quot;}
name还没有赋值
{/notpresent}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以把上面两个标签合并成为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{present name=&quot;name&quot;}
name已经赋值
{else /}
name还没有赋值
{/present}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>present</code>标签的<code>name</code>属性可以直接使用系统变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{present name=&quot;Think.get.name&quot;}
$_GET['name']已经赋值
{/present}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="empty-notempty-标签"><a href="#empty-notempty-标签" class="header-anchor">#</a> EMPTY NOTEMPTY 标签</h3> <p>empty标签用于判断某个变量是否为空，用法：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{empty name=&quot;name&quot;}
name为空值
{/empty}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果判断没有赋值，可以使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{notempty name=&quot;name&quot;}
name不为空
{/notempty}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>以把上面两个标签合并成为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{empty name=&quot;name&quot;}
name为空
{else /}
name不为空
{/empty}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>name</code>属性可以直接使用系统变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{empty name=&quot;Think.get.name&quot;}
$_GET['name']为空值
{/empty}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="defined-标签"><a href="#defined-标签" class="header-anchor">#</a> DEFINED 标签</h3> <p>DEFINED标签用于判断某个常量是否有定义，用法如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{defined name=&quot;NAME&quot;}
NAME常量已经定义
{/defined}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>name属性的值要注意严格大小写</p></div> <p>如果判断没有被定义，可以使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{notdefined name=&quot;NAME&quot;}
NAME常量未定义
{/notdefined}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以把上面两个标签合并成为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{defined name=&quot;NAME&quot;}
NAME常量已经定义
{else /}
NAME常量未定义
{/defined}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="标签嵌套"><a href="#标签嵌套" class="header-anchor">#</a> 标签嵌套</h2> <p>模板引擎支持标签的多层嵌套功能，可以对标签库的标签指定可以嵌套。</p> <p>系统内置的标签中，<code>volist</code>、<code>switch</code>、<code>if</code>、<code>elseif</code>、<code>else</code>、<code>foreach</code>、<code>compare</code>（包括所有的比较标签）、（<code>not</code>）<code>present</code>、（n<code>ot</code>）<code>empty</code>、（<code>not</code>）<code>defined</code>等标签都可以嵌套使用。例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{volist name=&quot;list&quot; id=&quot;vo&quot;}
    {volist name=&quot;vo['sub']&quot; id=&quot;sub&quot;}
        {$sub.name}
    {/volist}
{/volist}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>嵌套循环外层分类内部视频或文章,重点在于外部和内部标签各自设置 id 和 key，系统默认都是vo不适合会导致数据冲掉。</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{maccms:type ids=&quot;1,2,3,4&quot; order=&quot;asc&quot; by=&quot;sort&quot; id=&quot;vo1&quot; key=&quot;key1&quot;}
    {maccms:vod num=&quot;10&quot; type=&quot;'.$vo1['type_id'].'&quot; order=&quot;desc&quot; by=&quot;time&quot; id=&quot;vo2&quot; key=&quot;key2&quot;}
        {$vo1.type_name}:{$vo2.vod_name}；
    {/maccms:vod}
{/maccms:type}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>嵌套循环一级和二级分类数据</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code>{maccms:type ids=&quot;1,2,3,4,5&quot; order=&quot;asc&quot; by=&quot;sort&quot; id=&quot;vo&quot; key=&quot;key&quot;} 				  
	{maccms:type parent=&quot;'.$vo['type_id'].'&quot; order=&quot;asc&quot; by=&quot;sort&quot; id=&quot;vo2&quot; key=&quot;key2&quot;} 
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>:mac_url_type($vo2)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{$vo2.type_name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
	{/maccms:type}
{/maccms:type}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="使用php"><a href="#使用php" class="header-anchor">#</a> 使用PHP</h2> <p>php代码可以和标签在模板文件中混合使用，可以在模板文件里面书写任意的PHP语句代码 ，包括下面两种方式：</p> <h3 id="使用php标签"><a href="#使用php标签" class="header-anchor">#</a> 使用php标签</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>{php}echo 'Hello,world!';{/php}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们建议需要使用PHP代码的时候尽量采用php标签，因为原生的PHP语法可能会被配置禁用而导致解析错误。</p> <h3 id="使用原生php代码"><a href="#使用原生php代码" class="header-anchor">#</a> 使用原生php代码</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token string single-quoted-string">'Hello,world!'</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意：php标签或者php代码里面就不能再使用标签（包括普通标签和XML标签）了，因此下面的几种方式都是无效的：</p></div> <div class="language- line-numbers-mode"><pre class="language-text"><code>{php}{eq name='name'value='value'}value{/eq}{/php}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Php标签里面使用了<code>eq</code>标签，因此无效</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{php}if( {$user} != 'ThinkPHP' ) echo  'ThinkPHP' ;{/php}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>php标签里面使用了<code>{$user}</code>普通标签输出变量 ，因此无效。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{php}if( $user.name != 'ThinkPHP' ) echo  'ThinkPHP' ;{/php}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Php标签里面使用了$user.name 点语法变量输出 ，因此无效。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>简而言之，在PHP标签里面不能再使用PHP本身不支持的代码。</p></div> <p>如果设置了<code>tpl_deny_php</code>参数为<code>true</code>，就不能在模板中使用原生的<code>PHP</code>代码，但是仍然支持<code>PHP</code>标签输出。</p> <h3 id="自定义标签"><a href="#自定义标签" class="header-anchor">#</a> 自定义标签</h3> <p><strong>ASSIGN标签</strong> <code>ASSIGN</code>标签用于在模板文件中定义变量，用法如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{assign name=&quot;var&quot; value=&quot;123&quot; /}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在运行模板的时候，赋值了一个<code>var</code>的变量，值是<code>123</code>。</p> <p><code>value</code>属性也支持变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{assign name=&quot;var&quot; value=&quot;$val&quot; /}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者直接把系统变量赋值给var变量，例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{assign name=&quot;var&quot; value=&quot;$Think.get.name&quot; /}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>相当于，执行了：<code>$var = $_GET['name'];</code></p> <p><strong>DEFINE标签</strong> <code>DEFINE</code>标签用于中模板中定义常量，用法如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{define name=&quot;MY_DEFINE_NAME&quot; value=&quot;3&quot; /}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在运行模板的时候，就会定义一个<code>MY_DEFINE_NAME</code>的常量。</p> <p><code>value</code>属性可以支持变量（包括系统变量），例如：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{define name=&quot;MY_DEFINE_NAME&quot; value=&quot;$name&quot; /}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{define name=&quot;MY_DEFINE_NAME&quot; value=&quot;$Think.get.name&quot; /}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/theme/using-a-theme.html" class="prev">
        使用模板
      </a></span> <span class="next"><a href="/theme/structure.html">
        模板结构
      </a>
      →
    </span></p></div> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.266abcc8.js" defer></script><script src="/assets/js/5.b06b0d86.js" defer></script><script src="/assets/js/4.9ebf53b1.js" defer></script><script src="/assets/js/104.d189b941.js" defer></script><script src="/assets/js/8.a78a9654.js" defer></script>
  </body>
</html>
